# scrcpy的使用

## 一、简介

scrcpy是一个可以使用电脑端操作手机端的开源软件

官网：https://github.com/Genymobile/scrcpy/tree/v1.15.1

下载地址：https://github.com/Genymobile/scrcpy/releases

## 二、操作

### 1. 使用电脑连接手机

#### 1）有线连接

​	简单来说，scrcpy就是通过adb调试的方式来将手机屏幕投到电脑上，并可以通过电脑控制您的Android设备。它可以通过USB连接，也可以通过Wifi连接（类似于隔空投屏），而且不需要任何root权限。

首先，比较简单的是有线连接，即通过数据线连接手机和电脑来实现投屏。

##### 第一步我们还是要开启手机的“开发者选项”，勾选“USB调试”。

![image-20200808153829905](https://gitee.com/jj603786014/imgBed/raw/master/imgs/20200808165715.png)

##### 第二步在用数据线连接手机后，手机界面会弹出“USB调试”授权窗口，按照惯例，这里我们直接勾选“允许”。

![image-20200808162054091](https://gitee.com/jj603786014/imgBed/raw/master/imgs/20200808165716.png)

##### 第三步接着我们打开解压后的scrcpy文件（资源可在后台私信获取），直接运行scrcpy.exe。

![image-20200808162135854](https://gitee.com/jj603786014/imgBed/raw/master/imgs/20200808165717.png)

这便是所谓的有线连接，到这我们也可以对投屏的手机桌面进行操作，利用鼠标点击可以运行手机端程序，还能支持手机的全面屏手势操作，当然，如果你的电脑是触摸屏，那在电脑上操作手机和直接在手机操作没什么两样。

#### 2）无线连接

实现无线连接的基本要求是手机与电脑连接同一Wi-Fi。

下面我们开始实现无线连接的步骤，首先，我们需要将**CMD定位到scrcpy文件夹位置**，通常做法是这个目录加入到系统变量中，但这个方法太过复杂，对新手来说并不友好，这里有更简单的方法实现。



![img](https://pic3.zhimg.com/v2-d8b8baf6abcf4d71414383a0d1b70014_b.jpg)



我们打开电脑的CMD命令窗口（win+R，输入cmd，按回车），在命令窗口，我们首先定位文件夹所在的盘符位置，比如我将文件夹放在C盘，这里我们首先输入“c:”，下面将会出现盘符位置，然后我们再在命令行中输入“cd+文件夹所在路径（路径可在属性-安全中获取）”，比如“cd C:\Users\h7817\Desktop\scrcpy-win64-v1.14”，回车之后，我们可以看到命令行的前缀变成了文件所在的位置，**这说明CMD已经定位到scrcpy文件夹。**

其次，在数据线连接手机的情况下，我们输入“`adb tcpip 5555`”，回车之后出现“restarting in TCP mode port: 5555”之后便可断开数据连接。

最后，我们在CMD命令窗口中输入“`adb connect xxx.xxxx.x.xx`(手机端ip地址，可在连接的Wi-Fi中查看）”。当出现“connected to xxx.xxx.x.xx:5555”时则说明连接成功。接着我们在命令行中输入“scrcpy.exe”则自动打开scrcpy应用，电脑桌面也会出现手机桌面的投屏

![image-20200808154214537](https://gitee.com/jj603786014/imgBed/raw/master/imgs/20200808165718.png)

### 2.一些常规操作

#### **Scrcpy 基础操作介绍**

这些内容官方文档里都有，主要是给懒得看或者看不懂英文的小伙伴简单说明一下~

##### **1. 打开 scrcpy 的操作：**

Windows：

a. 直接双击打开启动程序；b.通过 cmd 或者 Windows powershell 输入 命令 scrcpy 启动程序；

macOS/Linux：

终端输入命令 scrcpy 启动程序。

##### **2. 限制分辨率：**

设备分辨率越高，延迟越大，用这个命令可以限制分辨率大小，保证性能：

```
scrcpy --max-size 1024
scrcpy -m 1024 # 简短一点的命令，效果相同
```

##### **3.  调整码率：**

默认码率是 8M，码率越高，画质越好，同时延迟越大，可自行调整：

```
scrcpy --bit-rate 2M
scrcpy -b 2M # 简短一点的命令，效果相同
```

※ 通过限制分辨率和码率，可以减少延迟，尤其是无线连接手机时效果更佳。

##### **4. 录屏：**

分为两种情况，一种是投屏状态下录屏：

```
scrcpy --record file.mp4
scrcpy -r file.mkv
```

一种是非投屏状态下录屏：

```
scrcpy --no-display --record file.mp4
scrcpy -Nr file.mkv
```

##### **5. 多设备连接的情况：**

如果有多个设备同时连接电脑，需要按照前面获取的 ID 号来操作打开 scrcpy：

```
scrcpy --serial 0123456789abcdef
scrcpy -s 0123456789abcdef
```

##### **6. 窗口置顶：**

如果你想要电脑上的手机界面置顶在最上层，方便在进行其他操作时也可以看到手机画面，可以尝试这个命令：

```
scrcpy --always-on-top
scrcpy -T
```

##### **7.  关闭手机屏幕：**

投屏操作下关闭手机屏幕，只在电脑上看到手机的亮屏状态，可以使用快捷键 Ctrl+O，或者尝试以下命令：

```
scrcpy --turn-screen-off
scrcpy -S
```

*上面这些命令，都可以组合起来一次性输入，然后会直接以修改好的形式启动 scrcpy。

##### **8. 键盘输入：**

投屏状态下，可以在对话框界面，调用手机内的中文输入法后，直接使用电脑键盘输入。

##### **9.  安装 apk、文件传输：**

直接拖拽即可。

## 三、问题解决

### 1. 无法操作手机问题

出现警告：因为屏幕尺寸忽略触摸事件

![image-20200808155738381](https://gitee.com/jj603786014/imgBed/raw/master/imgs/20200808165719.png)

解决：通过命令行的方式启动

具体参数查看上面的  **Scrcpy 基础操作介绍**

~~~cmd
scrcpy -S -b 2M -m 1024
~~~

![image-20200808155906803](https://gitee.com/jj603786014/imgBed/raw/master/imgs/20200808165720.png)

